<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Quizapp refactored to ReactJS</title>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.13.3/react.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.13.3/JSXTransformer.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
	</head>
	<body>
		<div id="content"></div>
  <script type="text/jsx">
	var QuestionsBox = React.createClass({
		getInitialState: function() {
			return {
				currentQuestion: 0,
				answerSelections: [],
				timePerQuestion: 10
			}
		},
		nextQuestion: function() {
			console.log("GOT TO NEXT QUESTION.  current state of currentQuestion is : " + this.state.currentQuestion);
			this.setState({
				currentQuestion: this.state.currentQuestion++
			})
			console.log("now currentQuestion state is " + this.state.currentQuestion);
		},
		render: function() {

			return (
				<div className="questionsbox">
					<QuestionPrompt quiz={quiz} currentQuestion={this.state.currentQuestion}/>
					<Choices nextQuestion={this.nextQuestion} quiz={quiz} currentQuestion={this.state.currentQuestion} />
				</div>
			);
		}
	});

	var QuestionPrompt = React.createClass({
		//the question/prompt being asked
		getInitialState: function() {
			return {
				currentQuestion: this.props.currentQuestion
			}
		},
		componentDidMount: function() {

		},
		render: function() {

			return (
				<h1>{this.props.quiz[this.state.currentQuestion].prompt}</h1>
			);
		}
	});

	var Choices = React.createClass({
		//the 4 multiple choice potential answers
		getInitialState: function() {
			return {
				quiz: quiz,
				currentQuestion: this.props.currentQuestion
			}
		},
		handleRightWrong: function(e) {//TODO do i have to set this variable somewhere else to initialize it?
			//check if selected choice (button clicked) event is right answer or not
			e.preventDefault();
			console.log(this);
			console.log("check answer function");
			console.log(this.refs.choice1.props.children);
			console.log(this.props.quiz[this.state.currentQuestion].answer);
			console.log(e.target.value);
			console.log("this.state.currentQuestion is  " + this.state.currentQuestion);
			//this.setState({buttonStyle: buttonStyle});
			if ((this.refs.choice3.props.children)===(this.props.quiz[0].answer)) {
				console.log("answer checker");
				this.setState()
			}
			var increaseQuestion = this.state.currentQuestion + 1;
			console.log("increaseQuestion is " + increaseQuestion);
			this.props.nextQuestion();
		},
		render: function(currentQuestion) {

			return (
				<div>
					<ul>
						<li><button ref="choice1" onClick={this.handleRightWrong}>{this.props.quiz[this.state.currentQuestion].choices[0]}</button></li>
						<li><button>{this.props.quiz[0].choices[1]}</button></li>
						<li><button ref="choice3" onClick={this.handleRightWrong}>{this.props.quiz[this.state.currentQuestion].choices[2]}</button></li>
						<li><button>{this.props.quiz[0].choices[3]}</button></li>
					</ul>
				</div>
			);
		}
	});

var quiz = [
	{
		prompt: "What is Bran unable to do due to his injuries?",
		choices: ["Sleep","Archery","Walk","Eat"],
		answer: "Walk",
	},
	{
		prompt: "Where is Theon Greyjoy tasked with raiding using only one ship by his father?",
		choices: ["Villages along the Stony Shore","Coastal towns of Bear Island","Ports along Blazewater Bay","Cape Kraken"],
		answer: "Villages along the Stony Shore"
	},
	{
		prompt: "As Maester Luwin is dying, he tells Osha to take Rickon and Bran Stark to",
		choices: ["Riverrun to find their mother","the Wall to find their brother Jon","Rivverun to find Rob", "King's Landing to find Arya and Sansa","find Benjen Stark north of the Wall"],
		answer: "the Wall to find their brother Jon"
	},
	{
		prompt: "What does Arya earn after she helped the Hound in the fight with Polliver's men?",
		choices: ["Horse","Armor","Chicken","Freedom"],
		answer: "Horse"
	},
	{
		prompt: "Who does Robb Stark send to make an alliance with Balon Greyjoy?",
		choices: ["Catelyn","Bran","Lord Umber","Theon"],
		answer: "Theon"
	},
	{
		prompt: "Which city is Ser Loras Tyrell the heir to?",
		choices: ["Riverrun","King's Landing","Highgarden","Winterfell"],
		answer: "Highgarden"
	},
	{
		prompt: "Who does Sansa beg to light a candle for her in Winterfell?",
		choices: ["Theon","Podrick","Brienne","Roose"],
		answer: "Theon"
	},
	{
		prompt: "What is the number of Lord Commanders that have served when Jon is elected?",
		choices: ["292","731","31","997"],
		answer: "997"
	},
	{
		prompt: "What does Bronn save Jaime from being killed by?",
		choices: ["Jaguar","Boar","Rats","Snake"],
		answer: "Snake"
	},
	{
		prompt: "Who says the name of the episode in 'The Wars To Come'?",
		choices: ["Mance","Daenerys","Tyrion","Sam"],
		answer: "Mance"
	}
];

React.render(
	<QuestionsBox quiz={quiz} />,
	document.getElementById('content')
);

	</script>

	</body>
</html>
